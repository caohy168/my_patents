<html><head><title>全文文本(Fulltext)</title><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'><style>div.fullText table {width: 100%;text-indent: 1px;} 
 div.fullText table td.header {font-weight: bold;text-align: center;font-family: '宋体';font-size: 16px;line-height:20px;color: #000000;padding: 5px;}div.fullText table td.content {padding: 1px;text-align: left;vertical-align: top;width: 100%;font-family: '宋体';font-size: 14px;line-height:20px;color: #000000;}</style></head><body><?xml version="1.0" encoding="UTF-8"?><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" class="fullText"><table class="fullText"><tr><td id="claim_title" class="header">权利要求书</td></tr><tr><td class="content" id="claim_1">1、一种智能存储卡，包括：增值应用数据缓存模块、增值应用模块，其特
      <br/>征在于，该智能存储卡还包括：两个以上逻辑通道以及存储介质，其中，
      <br/>
				</td></tr><tr><td class="content" id="claim_2">逻辑通道，用于接收用户终端上层程序根据预设的策略发送的增值数据，
      <br/>发送至所述增值应用数据缓存模块；
      <br/>
				</td></tr><tr><td class="content" id="claim_3">增值应用模块，用于将来自所述增值应用数据缓存的增值数据进行增值应
      <br/>用处理，将处理后的增值数据发送至存储介质中的预设地址存储。
      <br/>
				</td></tr><tr><td class="content" id="claim_4">2、如权利要求1所述的智能存储卡，其特征在于，所述增值数据包括增值
      <br/>应用数据和携带增值应用业务参数的增值命令数据。
      <br/>
				</td></tr><tr><td class="content" id="claim_5">3、如权利要求2所述的智能存储卡，其特征在于，所述预设的策略包括用
      <br/>户终端上层程序发送的增值数据与逻辑通道的映射关系。
      <br/>
				</td></tr><tr><td class="content" id="claim_6">4、如权利要求3所述的智能存储卡，其特征在于，所述逻辑通道对应增值
      <br/>应用数据缓存模块缓存地址或扩展命令或非正常智能存储卡操作。
      <br/>
				</td></tr><tr><td class="content" id="claim_7">5、如权利要求3所述的智能存储卡，其特征在于，所述存储介质包括：用
      <br/>户可用区域、隐藏区域以及私密区域，
      <br/>
				</td></tr><tr><td class="content" id="claim_8">用户可用区域，用于存储普通应用数据；
      <br/>
				</td></tr><tr><td class="content" id="claim_9">隐藏区域，为初始化时的预设地址，用于存储增值应用业务参数；
      <br/>
				</td></tr><tr><td class="content" id="claim_10">私密区域，为初始化时的预设地址，用于存储增值应用数据。
      <br/>
				</td></tr><tr><td class="content" id="claim_11">6、如权利要求1所述的智能存储卡，其特征在于，所述增值应用模块进一
      <br/>步用于从存储介质预设地址中读取处理后的增值数据，发送至所述增值应用数
      <br/>据缓存模块；
      <br/>
				</td></tr><tr><td class="content" id="claim_12">所述增值应用数据缓存模块，进一步用于接收增值应用模块发送的处理后
      <br/>的增值数据，通过所述逻辑通道发送至所述用户终端上层程序。
      <br/>
				</td></tr><tr><td class="content" id="claim_13">7、一种提高智能存储卡传输速率的方法，其特征在于，该方法包括：
      <br/>
				</td></tr><tr><td class="content" id="claim_14">预先设置与增值应用数据缓存模块相连的两个以上逻辑通道；
      <br/>
				</td></tr><tr><td class="content" id="claim_15">通过预先设置的逻辑通道接收用户终端上层程序根据预设的策略发送
      <br/>
					的增值应用数据，发送至增值应用数据缓存模块，然后发送至增值应用模块
      <br/>进行处理；
      <br/>
				</td></tr><tr><td class="content" id="claim_16">将处理后的增值数据发送至存储介质中的预设地址存储。
      <br/>
				</td></tr><tr><td class="content" id="claim_17">8、如权利要求7所述的方法，其特征在于，所述逻辑通道包括命令逻
      <br/>辑通道和数据逻辑通道。
      <br/>
				</td></tr><tr><td class="content" id="claim_18">9、如权利要求8所述的方法，其特征在于，所述逻辑通道对应增值应
      <br/>用数据缓存模块缓存地址或扩展命令或非正常智能存储卡操作。
      <br/>
				</td></tr><tr><td class="content" id="claim_19">10、如权利要求8所述的方法，其特征在于，所述预设的策略包括用户
      <br/>终端上层程序发送的增值数据与逻辑通道的映射关系。
      <br/>
				</td></tr><tr><td class="content" id="claim_20">11、如权利要求8所述的方法，其特征在于，所述增值数据包括通过所
      <br/>述数据逻辑通道传输的增值应用数据和通过所述命令逻辑通道传输的携带
      <br/>增值应用业务参数的增值命令数据。
      <br/>
				</td></tr><tr><td class="content" id="claim_21">12、如权利要求11所述的方法，其特征在于，所述增值应用业务参数
      <br/>包括发送增值应用数据的逻辑通道、增值应用数据所需的存储空间、基址和
      <br/>逻辑通道支持的增值应用数据长度。
      <br/>
				</td></tr><tr><td class="content" id="claim_22">13、如权利要求11所述的方法，其特征在于，所述通过预先设置的逻
      <br/>辑通道接收用户终端上层程序根据预设的策略发送的增值应用数据，发送至
      <br/>增值应用数据缓存模块，然后发送至增值应用模块进行处理具体包括：
      <br/>
				</td></tr><tr><td class="content" id="claim_23">用户终端上层程序根据预设的策略，向命令逻辑通道写入包含增值应用
      <br/>业务参数的增值命令数据；
      <br/>
				</td></tr><tr><td class="content" id="claim_24">所述命令逻辑通道将增值命令数据发送至所述命令逻辑通道对应的增
      <br/>值应用数据缓存模块缓存地址，然后发送至增值应用模块进行增值应用处
      <br/>理；
      <br/>
				</td></tr><tr><td class="content" id="claim_25">增值应用模块将处理的增值应用业务参数发送至所述存储介质中隐藏
      <br/>区域的预设地址进行存储。
      <br/>
				</td></tr><tr><td class="content" id="claim_26">14、如权利要求13所述的方法，其特征在于，所述用户终端上层程序
      <br/>向命令逻辑通道写入包含增值应用业务参数的增值命令数据具体包括：
      <br/>
					
				</td></tr><tr><td class="content" id="claim_27">用户终端上层程序按照预设的策略，通过智能存储卡接口向所述命令逻
      <br/>辑通道写入包含增值应用业务参数的命令数据，智能存储卡固件程序检测所
      <br/>述命令逻辑通道是否有命令数据写入。
      <br/>
				</td></tr><tr><td class="content" id="claim_28">15、如权利要求11所述的方法，其特征在于，所述通过预先设置的逻
      <br/>辑通道接收用户终端上层程序根据预设的策略发送的增值应用数据，发送至
      <br/>增值应用数据缓存模块，然后发送至增值应用模块进行处理具体包括：
      <br/>
				</td></tr><tr><td class="content" id="claim_29">用户终端上层程序根据预设的策略，将增值应用数据按照所述数据逻辑
      <br/>通道支持的增值应用数据长度进行划分，并发送至所述数据逻辑通道；
      <br/>
				</td></tr><tr><td class="content" id="claim_30">所述数据逻辑通道接收增值应用数据，发送至所述数据逻辑通道对应的
      <br/>增值应用数据缓存模块缓存地址，然后发送至增值应用模块进行增值应用处
      <br/>理；
      <br/>
				</td></tr><tr><td class="content" id="claim_31">所述将处理后的增值数据发送至存储介质中的预设地址存储为：将处理
      <br/>后的增值应用数据发送至所述存储介质私密区域中的预设地址存储。
      <br/>
				</td></tr><tr><td class="content" id="claim_32">16、如权利要求15所述的方法，其特征在于，该方法进一步包括：
      <br/>
				</td></tr><tr><td class="content" id="claim_33">从所述私密区域中的预设地址读取处理后的增值应用数据，发送至所述
      <br/>数据逻辑通道，用户终端上层程序从所述数据逻辑通道获取处理后的增值应
      <br/>用数据。
      <br/>
					
				</td></tr></table></div><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" class="fullText"><table><tr><td id="description_title" class="header">说明书</td></tr><tr><td class="content" id="description_invention_title">一种智能存储卡及提高智能存储卡传输速率的方法
  </td></tr><tr><td class="content" id="description_1">技术领域
  </td></tr><tr><td class="content" id="description_2">本发明涉及智能存储卡(SSC，Smart Storage Chip)技术，特别涉及一
    种智能存储卡及提高智能存储卡传输速率的方法。
    
				</td></tr><tr><td class="content" id="description_3">背景技术
  </td></tr><tr><td class="content" id="description_4">智能存储卡融合了系统芯片(SOC，System-On-Chip)、中央处理器(CPU，
    Center Process Unit)、片上操作系统、数据存储、安全认证、射频识别(RFID，
    Radio Frequency Identification)等新兴技术，广泛地应用于数字电视、电信
    增值业务、安全存储产品等领域。
    
				</td></tr><tr><td class="content" id="description_5">图1为现有智能存储卡的结构示意图，参见图1，该智能存储卡包括：
    智能存储卡控制器以及存储介质，其中，智能存储卡控制器包含普通应用数
    据缓存模块、普通应用数据处理模块、增值应用数据缓存模块和增值应用模
    块，
    
				</td></tr><tr><td class="content" id="description_6">普通应用数据缓存模块，用于通过智能存储卡接口与外部的用户终端进
    行交互，接收用户终端上层程序发送的普通应用数据，发送至普通应用数据
    处理模块进行处理；接收普通应用数据处理模块发送的处理后的普通应用数
    据，发送至用户终端上层程序；
    
				</td></tr><tr><td class="content" id="description_7">普通应用数据处理模块，用于通过内部的普通应用接口接收普通应用数
    据，进行相应处理，将处理后的普通应用数据通过闪存普通应用接口发送至
    存储介质，以及，在需要的时候，从存储介质读取存储的处理后的普通应用
    数据，发送至普通应用数据缓存模块；
    
				</td></tr><tr><td class="content" id="description_8">存储介质，用于存储处理后的普通应用数据；
    
				</td></tr><tr><td class="content" id="description_9">增值应用数据缓存模块，用于通过智能存储卡接口与外部的用户终端进
    
					行交互，接收用户终端上层程序发送的增值应用数据，进行缓存，并将缓存
    的增值应用数据通过增值应用接口发送至增值应用模块进行处理；接收增值
    应用模块发送的处理后的增值应用数据，进行缓存，并将缓存的增值应用数
    据发送至用户终端上层程序；
    
				</td></tr><tr><td class="content" id="description_10">现有智能存储卡中，增值应用数据缓存模块一次接收的增值应用数据量
    通常只有1个扇区(512字节)，多个扇区的增值应用数据分次进行接收。
    
				</td></tr><tr><td class="content" id="description_11">增值应用模块，用于通过内部的增值应用接口接收增值应用数据，进行
    相应处理，将处理后的增值应用数据通过内部的增值应用接口发送至增值应
    用数据缓存模块。
    
				</td></tr><tr><td class="content" id="description_12">随着数字电视解扰、安全数据加解密等增值业务拓展的需要，传输的数
    据量以及数据速率要求也越来越高，如何在短时间内把大量的增值应用数据
    通过与智能存储卡接口相连的增值应用数据缓存模块发送到智能存储卡内
    的增值应用模块进行增值应用处理成为亟待解决的问题。现有技术中，为了
    增加智能存储卡接收的增值应用数据量处理效率，通常采用有足够大的数据
    缓存，例如，大容量数据缓存以提高缓存容量、以及高速的数据处理器等资
    源，例如，高级精简指令计算机(ARM，Advanced RISC Machines)、每秒
    百万次指令(MIPS，Million Instructions Per Second)等处理器以减少数据
    读写的等待时间。
    
				</td></tr><tr><td class="content" id="description_13">由上述可见，现有智能存储卡，增值应用数据缓存模块一次接收的增值
    应用数据量通常只有1个扇区，使得智能存储卡传输速率较低，多个扇区的
    增值应用数据需要分次接收传输，增加了用户终端应用程序与智能存储卡交
    互的时间，影响了用户终端的增值应用体验；进一步地，增值应用模块处理
    后的增值应用数据需要发送至增值应用数据缓存模块进行缓存，对数据缓存
    资源要求高，而缓存资源增加的成本高，当缓存资源不足时，例如，通过采
    用高速的数据处理器，一方面提高了单位时间内增值应用数据缓存模块接收
    的次数，提高了数据传输速率，但另一方面，需要的缓存资源也相应增大，
    因而必须更换更大容量的数据缓存，使得产品的兼容性、升级性差、更换成
    
					本高、开发周期较长；而且，将增值应用数据处理后缓存在增值应用数据缓
    存模块，掉电时就会丢失缓存的增值应用数据。
    
				</td></tr><tr><td class="content" id="description_14">发明内容
  </td></tr><tr><td class="content" id="description_15">有鉴于此，本发明的一个主要目的在于提供一种智能存储卡，提高智能
    存储卡增值应用数据传输速率，降低用户终端应用程序与智能存储卡交互的
    时间。
    
				</td></tr><tr><td class="content" id="description_16">本发明的另一个主要目的在于提供一种提高智能存储卡传输速率的方
    法，提高智能存储卡增值应用数据传输速率，降低用户终端应用程序与智能
    存储卡交互的时间。
    
				</td></tr><tr><td class="content" id="description_17">为达到上述目的，本发明提供了一种智能存储卡，该智能存储卡包括：
    增值应用数据缓存模块、增值应用模块，该智能存储卡还包括：两个以上逻
    辑通道以及存储介质，其中，
    
				</td></tr><tr><td class="content" id="description_18">逻辑通道，用于接收用户终端上层程序根据预设的策略发送的增值数
    据，发送至所述增值应用数据缓存模块；
    
				</td></tr><tr><td class="content" id="description_19">增值应用模块，用于将来自所述增值应用数据缓存的增值数据进行增值应
    用处理，将处理后的增值数据发送至存储介质中的预设地址存储。
    
				</td></tr><tr><td class="content" id="description_20">所述增值数据包括增值应用数据和携带增值应用业务参数的增值命令数
    据。
    
				</td></tr><tr><td class="content" id="description_21">所述预设的策略包括用户终端上层程序发送的增值数据与逻辑通道的映射
    关系。
    
				</td></tr><tr><td class="content" id="description_22">所述逻辑通道对应增值应用数据缓存模块缓存地址或扩展命令或非正常智
    能存储卡操作。
    
				</td></tr><tr><td class="content" id="description_23">所述存储介质包括：用户可用区域、隐藏区域以及私密区域，
    
				</td></tr><tr><td class="content" id="description_24">用户可用区域，用于存储普通应用数据；
    
				</td></tr><tr><td class="content" id="description_25">隐藏区域，为初始化时的预设地址，用于存储增值应用业务参数；
    
				</td></tr><tr><td class="content" id="description_26">私密区域，为初始化时的预设地址，用于存储增值应用数据。
    
				</td></tr><tr><td class="content" id="description_27">所述增值应用模块进一步用于从存储介质预设地址中读取处理后的增值数
    据，发送至所述增值应用数据缓存模块；
    
				</td></tr><tr><td class="content" id="description_28">所述增值应用数据缓存模块，进一步用于接收增值应用模块发送的处理后
    的增值数据，通过所述逻辑通道发送至所述用户终端上层程序。
    
				</td></tr><tr><td class="content" id="description_29">一种提高智能存储卡传输速率的方法，该方法包括：
    
				</td></tr><tr><td class="content" id="description_30">预先设置与增值应用数据缓存模块相连的两个以上逻辑通道；
    
				</td></tr><tr><td class="content" id="description_31">通过预先设置的逻辑通道接收用户终端上层程序根据预设的策略发送
    的增值应用数据，发送至增值应用数据缓存模块，然后发送至增值应用模块
    进行处理；
    
				</td></tr><tr><td class="content" id="description_32">将处理后的增值数据发送至存储介质中的预设地址存储。
    
				</td></tr><tr><td class="content" id="description_33">所述逻辑通道包括命令逻辑通道和数据逻辑通道。
    
				</td></tr><tr><td class="content" id="description_34">所述逻辑通道对应增值应用数据缓存模块缓存地址或扩展命令或非正
    常智能存储卡操作。
    
				</td></tr><tr><td class="content" id="description_35">所述预设的策略包括用户终端上层程序发送的增值数据与逻辑通道的
    映射关系。
    
				</td></tr><tr><td class="content" id="description_36">所述增值数据包括通过所述数据逻辑通道传输的增值应用数据和通过
    所述命令逻辑通道传输的携带增值应用业务参数的增值命令数据。
    
				</td></tr><tr><td class="content" id="description_37">所述增值应用业务参数包括发送增值应用数据的逻辑通道、增值应用数
    据所需的存储空间、基址和逻辑通道支持的增值应用数据长度。
    
				</td></tr><tr><td class="content" id="description_38">所述通过预先设置的逻辑通道接收用户终端上层程序根据预设的策略
    发送的增值应用数据，发送至增值应用数据缓存模块，然后发送至增值应用
    模块进行处理具体包括：
    
				</td></tr><tr><td class="content" id="description_39">用户终端上层程序根据预设的策略，向命令逻辑通道写入包含增值应用
    业务参数的增值命令数据；
    
				</td></tr><tr><td class="content" id="description_40">所述命令逻辑通道将增值命令数据发送至所述命令逻辑通道对应的增
    值应用数据缓存模块缓存地址，然后发送至增值应用模块进行增值应用处
    理；
    
				</td></tr><tr><td class="content" id="description_41">增值应用模块将处理的增值应用业务参数发送至所述存储介质中隐藏
    区域的预设地址进行存储。
    
				</td></tr><tr><td class="content" id="description_42">所述用户终端上层程序向命令逻辑通道写入包含增值应用业务参数的
    增值命令数据具体包括：
    
				</td></tr><tr><td class="content" id="description_43">用户终端上层程序按照预设的策略，通过智能存储卡接口向所述命令逻
    辑通道写入包含增值应用业务参数的命令数据，智能存储卡固件程序检测所
    述命令逻辑通道是否有命令数据写入。
    
				</td></tr><tr><td class="content" id="description_44">所述通过预先设置的逻辑通道接收用户终端上层程序根据预设的策略
    发送的增值应用数据，发送至增值应用数据缓存模块，然后发送至增值应用
    模块进行处理具体包括：
    
				</td></tr><tr><td class="content" id="description_45">用户终端上层程序根据预设的策略，将增值应用数据按照所述数据逻辑
    通道支持的增值应用数据长度进行划分，并发送至所述数据逻辑通道；
    
				</td></tr><tr><td class="content" id="description_46">所述数据逻辑通道接收增值应用数据，发送至所述数据逻辑通道对应的
    增值应用数据缓存模块缓存地址，然后发送至增值应用模块进行增值应用处
    理；
    
				</td></tr><tr><td class="content" id="description_47">所述将处理后的增值数据发送至存储介质中的预设地址存储为：将处理
    后的增值应用数据发送至所述存储介质私密区域中的预设地址存储。
    
				</td></tr><tr><td class="content" id="description_48">该方法进一步包括：
    
				</td></tr><tr><td class="content" id="description_49">从所述私密区域中的预设地址读取处理后的增值应用数据，发送至所述
    数据逻辑通道，用户终端上层程序从所述数据逻辑通道获取处理后的增值应
    用数据。
    
				</td></tr><tr><td class="content" id="description_50">由上述的技术方案可见，本发明提供的智能存储卡及提高智能存储卡传
    输速率的方法，通过预先设置与增值应用数据缓存模块相连的逻辑通道；通
    过预先设置的逻辑通道接收用户终端上层程序根据预设的策略发送的增值
    应用数据，发送至增值应用数据缓存模块，然后发送至增值应用模块进行处
    理；将处理后的增值数据发送至存储介质中的预设地址存储。在原有增值应
    用数据缓存模块与增值应用模块的基础上，设置逻辑通道用以接收增值数
    
					据，增加了智能存储卡控制器一次接收的增值数据量，因而提高了智能存储
    卡增值应用数据传输速率，提高了用户终端的增值应用体验；并将处理的增
    值数据发送至存储介质中的预设地址存储，使得掉电不会丢失存储的增值数
    据，同时充分利用了智能存储卡中存储介质的存储容量优势，对现有智能存
    储卡的改动小，有利于智能存储卡的推广。
    
				</td></tr><tr><td class="content" id="description_51">附图说明
  </td></tr><tr><td class="content" id="description_52">图1为现有智能存储卡的结构示意图；
    
				</td></tr><tr><td class="content" id="description_53">图2为本发明智能存储卡结构示意图；
    
				</td></tr><tr><td class="content" id="description_54">图3为本发明提高智能存储卡传输速率的方法流程示意图；
    
				</td></tr><tr><td class="content" id="description_55">图4为本发明SD卡控制器结构示意图；
    
				</td></tr><tr><td class="content" id="description_56">图5为本发明SD卡存储介质结构示意图；
    
				</td></tr><tr><td class="content" id="description_57">图6为本发明传输增值应用业务参数的流程示意图；
    
				</td></tr><tr><td class="content" id="description_58">图7为本发明传输增值应用数据的流程示意图。
    
				</td></tr><tr><td class="content" id="description_59">具体实施方式
  </td></tr><tr><td class="content" id="description_60">为使本发明的目的、技术方案和优点更加清楚，下面将结合附图及具体
    实施例对本发明作进一步地详细描述。
    
				</td></tr><tr><td class="content" id="description_61">本发明提供的智能存储卡及提高智能存储卡传输速率的方法，通过扩展
    智能存储卡的接口协议，设置多个逻辑通道，利用设置的逻辑通道接收增值
    数据，并通过增值应用数据缓存模块发送至增值应用模块进行增值应用处
    理，将增值应用处理后的增值数据存储至存储介质中的预设地址中。
    
				</td></tr><tr><td class="content" id="description_62">下面描述中，对于与本发明涉及的普通应用及其相关的普通应用数据缓
    存模块和普通应用数据处理模块，与现有技术相类似，本发明中不再赘述。
    
				</td></tr><tr><td class="content" id="description_63">图2为本发明智能存储卡结构示意图，参见图2，该智能存储卡包括：
    增值应用数据缓存模块、增值应用模块、一个以上的逻辑通道以及存储介质，
    其中，
    
				</td></tr><tr><td class="content" id="description_64">逻辑通道，用于接收用户终端上层程序根据预设的策略发送的增值数
    据，发送至增值应用数据缓存模块进行处理；
    
				</td></tr><tr><td class="content" id="description_65">逻辑通道还用于接收增值应用数据缓存模块发送的处理后的增值数据，
    发送至用户终端上层程序；
    
				</td></tr><tr><td class="content" id="description_66">增值应用数据缓存模块，用于接收用户终端上层程序以及逻辑通道发送
    的增值应用数据，进行缓存，并将缓存的增值应用数据发送至增值应用模块
    进行处理；接收增值应用模块发送的处理后的增值应用数据，进行缓存，并
    将缓存的增值应用数据发送至用户终端上层程序，或通过逻辑通道发送至用
    户终端上层程序；
    
				</td></tr><tr><td class="content" id="description_67">增值应用模块，用于接收增值数据，进行相应增值应用处理，将处理后
    的增值数据发送至增值应用数据缓存模块或存储介质中相应的预设地址中；
    
				</td></tr><tr><td class="content" id="description_68">从存储介质中相应的预设地址中读取处理后的增值数据，发送至增值应
    用数据缓存模块；
    
				</td></tr><tr><td class="content" id="description_69">存储介质，用于接收处理后的增值数据，存储在相应的预设地址中。
    
				</td></tr><tr><td class="content" id="description_70">实际应用中，对智能存储卡接口协议进行扩展，设置一个以上的逻辑通
    道具体包含：在智能存储卡控制器中设置一个以上(包含一个)的逻辑通道，
    每个逻辑通道与增值应用数据缓存模块相连，每个逻辑通道映射增值应用数
    据缓存模块中的缓存地址，每个逻辑通道映射的缓存地址可以相同，也可以
    不同。预设地址即指从存储介质中划分出一定范围的地址空间，专用于存储
    增值数据。同时，对用户终端上层程序进行相应修改，使得用户终端上层程
    序发送增值数据时，按照预设的策略，将增值数据分别发送至相应的逻辑通
    道或增值应用数据缓存模块。
    
				</td></tr><tr><td class="content" id="description_71">本发明中，增值数据包括增值应用数据和携带增值应用业务参数的增值
    命令数据。
    
				</td></tr><tr><td class="content" id="description_72">预设的策略可以是根据设置的逻辑通道数量，定义发送的增值应用数据
    分别对应逻辑通道，例如，定义增值应用数据1发送至逻辑通道1，即逻辑
    通道1映射的增值应用数据缓存模块中的缓存地址，增值应用数据2发送至
    
					逻辑通道2等，并以一定的规律循环。可以由用户终端上层程序进行设置，
    也可以通过其他方式设置好后通知用户终端上层程序。当增值应用模块处理
    完增值应用数据1时，将处理后的增值应用数据1发送至存储介质中相应的
    预设地址中。
    
				</td></tr><tr><td class="content" id="description_73">本实施例中，智能存储卡接口协议可以为安全数字卡(SD，Secure Digital
    Card)、多媒体卡(MMC，Multi Media Card)和通用串行接口(USB，Universal
    Serial Bus)协议等，通过对智能存储卡接口协议进行扩展，在智能存储卡控
    制器中设置逻辑通道，设置的每个逻辑通道对应不同的增值应用数据缓存地
    址，以便用户终端上层程序或增值应用数据缓存模块访问逻辑通道时，智能
    存储卡控制器能够定位逻辑通道。
    
				</td></tr><tr><td class="content" id="description_74">实际应用中，设置的每个逻辑通道也可以对应一个扩展的命令，扩展命
    令可以是在智能存储卡接口协议中，预先定义一定的扩展命令为指向增值应
    用数据缓存模块的逻辑通道；也可以是对应一个非正常智能存储卡操作等，
    即在智能存储卡接口协议中定义相应的操作流程做为指向增值应用数据缓
    存模块的逻辑通道，如果操作该逻辑通道，则表示通过该逻辑通道访问增值
    应用数据缓存模块。
    
				</td></tr><tr><td class="content" id="description_75">实际应用中，为了进一步降低智能存储卡的成本，也可以在智能存储卡
    控制器中不设置增值应用数据缓存模块，直接使用普通应用数据缓存模块代
    替；此外，对于现有采用了大容量数据缓存模块的智能存储卡，也可以按照
    本发明相类似的方法，通过扩展智能存储卡接口协议，将该大容量数据缓存
    模块拆分为独立的多个小数据缓存模块，每个小数据缓存模块通过相应的增
    值应用接口分别与增值应用模块相连。
    
				</td></tr><tr><td class="content" id="description_76">由上述可见，本实施例在原有增值应用数据缓存模块与增值应用模块的
    基础上，充分利用智能存储卡的存储资源，通过扩展智能存储卡接口协议，
    设置一个以上逻辑通道用以分别接收用户终端上层程序发送的增值数据，通
    过增值应用数据缓存模块发送至增值应用模块进行处理，由于通过多个逻辑
    通道来接收用户终端应用程序发送的增值数据，增加了智能存储卡控制器一
    
					次接收的增值数据量，因而提高了智能存储卡增值应用数据传输速率，相应
    降低了用户终端应用程序与智能存储卡交互的时间，提高了用户终端的增值
    应用体验；进一步地，通过逻辑通道将增值应用数据传输至增值应用模块进
    行处理，增值应用模块将处理后的增值数据发送至存储介质中的预设地址进
    行存储，充分利用了智能存储卡中存储介质的存储容量优势，数据缓存资源
    要求低，对现有智能存储卡的改动小，不需要另行定制换用资源更丰富的智
    能存储卡控制器，产品的兼容性、升级性好、更换成本低，使得智能存储卡
    的开发周期缩短，有利于智能存储卡的推广；而且，将增值数据处理后存储
    在存储介质中，掉电不会丢失存储的增值应用数据。
    
				</td></tr><tr><td class="content" id="description_77">图3为本发明提高智能存储卡传输速率的方法流程示意图，参见图3，
    本发明保留现有的增值应用数据缓存模块，该流程包括：
    
				</td></tr><tr><td class="content" id="description_78">步骤301，预先设置与增值应用数据缓存模块相连的逻辑通道；
    
				</td></tr><tr><td class="content" id="description_79">本步骤中，对智能存储卡接口协议进行扩展，设置与增值应用数据缓存
    模块相连的多个逻辑通道，设置的每个逻辑通道对应不同的增值应用数据缓
    存地址、不同的扩展命令、或不同的非正常智能存储卡操作。同时，对用户
    终端上层程序进行相应修改，使得用户终端上层程序发送增值数据时，按照
    预设的策略，将增值数据分别发送至相应的逻辑通道或增值应用数据缓存模
    块。
    
				</td></tr><tr><td class="content" id="description_80">与现有的智能存储卡相比，增值应用数据缓存模块不再是依次接收用户
    终端上层程序发送的所有增值应用数据，而是根据预设的策略，接收用户终
    端上层程序发送的增值应用数据中的一部分，同时通过逻辑通道接收用户终
    端上层程序发送的增值应用数据中的另一部分。
    
				</td></tr><tr><td class="content" id="description_81">步骤302，通过增值应用数据缓存模块以及预先设置的逻辑通道接收用
    户终端上层程序发送的增值数据，发送至增值应用模块进行处理；
    
				</td></tr><tr><td class="content" id="description_82">本步骤中，根据预设的策略，增值应用数据缓存模块接收用户终端上层
    程序发送的增值应用数据中的一部分，发送至增值应用模块；同时，各逻辑
    通道也根据预设的策略将相应接收的增值数据通过增值应用数据缓存模块
    
					发送至增值应用模块。
    
				</td></tr><tr><td class="content" id="description_83">本实施例中，增值应用数据缓存模块不直接接收用户终端上层程序发送
    的增值应用数据，用户终端上层程序发送的增值应用数据通过设置的逻辑通
    道发送至增值应用数据缓存模块。
    
				</td></tr><tr><td class="content" id="description_84">步骤303，增值应用模块将从增值应用数据缓存模块接收的增值数据处
    理后发送至存储介质中的预设地址存储。
    
				</td></tr><tr><td class="content" id="description_85">实际应用中，现有制约智能存储卡传输速率的瓶颈在于增值应用数据缓
    存模块一次接收的增值应用数据量通常只有1个扇区，而智能存储卡接口的
    传输速率、以及智能存储卡内的增值应用数据缓存模块与增值应用模块之间
    的增值应用接口速率较高，因此，通过设置逻辑通道增强增值应用数据缓存
    模块一次可接收的增值应用数据量，把数据保存在存储介质中，提高了智能
    卡控制器一次接收的增值应用数据量，从而提高了智能存储卡增值应用数据
    传输速率。
    
				</td></tr><tr><td class="content" id="description_86">至此，该流程结束。
    
				</td></tr><tr><td class="content" id="description_87">以下以SD卡内的SD卡控制器并以每个逻辑通道对应不同的增值应用
    数据缓存地址为例进行说明，对本发明提高智能存储卡增值应用数据传输速
    率的方法进行详细说明。
    
				</td></tr><tr><td class="content" id="description_88">图4为本发明SD卡控制器结构示意图，参见图4，SD卡控制器通过
    SD卡接口与用户终端相连，包括增强型SD固件程序(Enhance SD Firmware)
    模块以及扩展应用核心固件程序(Potevio APP Core Firmware)模块，增强
    型SD固件程序模块中包括多个逻辑通道地址ADD 1、...、ADD n(n为大
    于1的自然数)以及普通地址，其中，每个逻辑通道地址映射增值应用数据
    缓存地址，逻辑通道地址通过相应的增值应用接口分别与扩展应用核心固件
    程序模块相连，用以传输增值数据，可以分为命令逻辑通道和数据逻辑通道。
    普通地址通过闪存(Flash)普通扇区接口与存储介质相连，用以传输普通应
    用数据；扩展应用核心固件程序模块，即增值应用模块通过增值应用接口，
    本实施例中，通过闪存私密扇区接口或闪存隐藏扇区接口与存储介质相连。
    
				</td></tr><tr><td class="content" id="description_89">本实施例中，以设置的逻辑通道地址为ADD 1和ADD 2为例进行说明，
    对SD卡接口协议进行扩展：定义ADD 1、ADD 2为两个与增值应用数据缓
    存模块相关联的逻辑通道，其中，ADD 1为单块扇区读写，为命令逻辑通道，
    对应传输携带增值应用业务参数的增值命令数据；ADD 2为多块扇区读写，
    为数据逻辑通道，对应传输增值应用数据。ADD 3为普通地址，映射存储介
    质中除预设地址外的地址。
    
				</td></tr><tr><td class="content" id="description_90">图5为本发明SD卡存储介质结构示意图，参见图5，该存储介质包括：
    用户可用区域、隐藏区域以及私密区域，
    
				</td></tr><tr><td class="content" id="description_91">用户可用区域，为普通地址ADD 3映射的地址区域，用于存储普通应
    用数据；
    
				</td></tr><tr><td class="content" id="description_92">隐藏区域，为初始化时的预设地址，该预设地址可以是一定范围内的多
    个存储地址，用于存储增值应用业务参数；
    
				</td></tr><tr><td class="content" id="description_93">私密区域，为初始化时的预设地址，该预设地址可以是一定范围内的多
    个存储地址，用于存储增值应用数据。
    
				</td></tr><tr><td class="content" id="description_94">上述用户可用区域、隐藏区域以及私密区域的存储地址空间各不相同，
    具体可以根据普通应用以及增值应用的需求进行分配。例如，当对SD卡进
    行初始化时，在存储介质上预设一个地址范围作为隐藏区域，预设另一个地
    址范围作为私密区域。并定义地址范围ADD 1为逻辑通道1；定义另一个不
    同于ADD 1的地址范围作为逻辑通道2，同时，可以以ADD 1和ADD 2生
    成两个文件，两个文件的大小为ADD 1和ADD 2的地址范围大小，这样，
    当用户终端上层程序需要发送命令时，可以将两个文件的地址和该命令写入
    相应的文件中，然后通过SD卡接口传送至SD卡控制器；最后，将存储介
    质中其它地址范围作为用户可用区域，映射为普通地址ADD 3。
    
				</td></tr><tr><td class="content" id="description_95">实际应用中，为了提高SD卡的访问安全性，需要对用户终端进行增值
    应用操作设置一定的条件，使得普通用户终端不能访问存储在存储介质中的
    增值应用数据，即不能访问私密区域。例如，设置一定的安全条件对用户终
    端进行合法性鉴权，或者是存在一定的安全标识的条件下用户终端才能操作
    
					相应的逻辑通道。当然，设置安全条件(访问权限、安全标识)只是提高访
    问安全性等附加效果，不执行该判断过程也能够保证本发明的提高智能存储
    卡增值应用数据传输速率的目的。
    
				</td></tr><tr><td class="content" id="description_96">图6为本发明传输增值应用业务参数的流程示意图，结合参见图4和图
    5，该流程包括：
    
				</td></tr><tr><td class="content" id="description_97">步骤601，用户终端向ADD1写入包含增值应用业务参数的增值命令数
    据；
    
				</td></tr><tr><td class="content" id="description_98">本步骤中，定义ADD1为命令逻辑通道，使用单块扇区处理模式，用户
    终端上层程序按照预设的策略，通过SD接口向ADD1写入包含增值应用业
    务参数的命令数据，表示通过ADD1发送命令数据到增值应用模块，用于增
    值应用业务参数的设置，当SD卡控制器(增强型SD固件程序)检测到ADD1
    有数据写入，并确定为命令数据，与用户终端上层程序交互判断满足预设的
    安全条件后，执行后续流程。交互判断的流程为现有技术，在此不再赘述。
    增值应用业务参数具体包括后续发送的增值应用数据的逻辑通道、预设地址
    范围、所需的存储空间、基址、逻辑通道支持的增值应用数据长度以及其它
    增值参数等。
    
				</td></tr><tr><td class="content" id="description_99">步骤602，ADD1通过增值应用接口将命令数据发送至增值应用模块；
    
				</td></tr><tr><td class="content" id="description_100">本步骤中，增强型SD固件程序将包括增值应用业务参数的命令数据输
    入后，跳转到增值应用模块。
    
				</td></tr><tr><td class="content" id="description_101">步骤603，增值应用模块接收命令数据，进行相应增值应用处理；
    
				</td></tr><tr><td class="content" id="description_102">步骤604，增值应用模块向ADD1返回该命令数据的响应；
    
				</td></tr><tr><td class="content" id="description_103">本步骤中，响应可以包含增值应用数据的存储空间、基址、逻辑通道支
    持的增值应用数据长度以及其它增值参数。
    
				</td></tr><tr><td class="content" id="description_104">步骤605，增值应用模块将进行增值应用处理的增值应用业务参数发送
    至存储介质中预设地址进行存储。
    
				</td></tr><tr><td class="content" id="description_105">本步骤中，存储介质中预设地址为命令中的参数，指向隐藏区域。处理
    完成后通过增值应用接口返回给增强型SD固件程序，也可以将处理完成后
    
					的增值应用数据存储到存储介质中预设地址，即隐藏区域中。
    
				</td></tr><tr><td class="content" id="description_106">步骤604与步骤605并没有先后顺序，即步骤605可以在步骤604前执
    行。
    
				</td></tr><tr><td class="content" id="description_107">当增强型SD固件程序需要读取命令数据的响应时，执行读取ADD1操
    作，获取响应。
    
				</td></tr><tr><td class="content" id="description_108">后续中，当用户终端上层程序向SD卡控制器发送增值应用数据时，执
    行如图7所示的流程。
    
				</td></tr><tr><td class="content" id="description_109">图7为本发明传输增值应用数据的流程示意图，参见图7，该流程包括：
    
				</td></tr><tr><td class="content" id="description_110">步骤701，用户终端上层程序根据预设的策略，将增值应用数据按照逻
    辑通道支持的增值应用数据长度进行划分，并发送至相应的逻辑通道；
    
				</td></tr><tr><td class="content" id="description_111">本步骤中，逻辑通道支持的增值应用数据长度取决于逻辑通道地址的大
    小以及操作SD卡的用户终端上的操作系统支持的数据大小等。
    
				</td></tr><tr><td class="content" id="description_112">本实施例中，逻辑通道为ADD2，定义为数据逻辑通道，同时，用户
    终端上层程序也将增值应用数据发送至增值应用数据缓存模块，增值应用数
    据缓存模块按照现有流程进行处理，在此不再赘述。
    
				</td></tr><tr><td class="content" id="description_113">步骤702，数据逻辑通道接收增值应用数据，通过增值应用接口发送至
    增值应用模块；
    
				</td></tr><tr><td class="content" id="description_114">本步骤中，增强型SD固件程序中的数据逻辑通道ADD2根据扩展的
    协议以单个扇区为单位接收增值应用数据，并通过增值应用接口送入增值应
    用模块。
    
				</td></tr><tr><td class="content" id="description_115">步骤703，增值应用模块对增值应用数据进行增值应用处理。
    
				</td></tr><tr><td class="content" id="description_116">本步骤中，增值应用模块可以对增值应用数据进行安全运算、增值业务
    处理等功能；处理完成后将处理完成后的增值应用数据存储到存储介质中预
    设地址，即私密区域中。
    
				</td></tr><tr><td class="content" id="description_117">后续中，在需要读取处理的增值应用数据时，向ADD2发送读取命令操
    作，表示需要通过闪存私密扇区接口将需要的处理后的增值应用数据从存储
    介质中相应位置读出，送入增值应用模块进行相应处理，再通过ADD2以及
    
					SD卡接口发送至终端上层程序。
    
				</td></tr><tr><td class="content" id="description_118">具体来说，扩展应用核心固件程序根据预设的策略，例如，读命令设置
    的相关参数，按照扩展的协议从私密区域读取相应地址和长度的经处理的增
    值应用数据，该增值应用数据以单个扇区为单位通过闪存私密扇区接口返回
    给增值应用模块进行相应处理，当然，根据实际需要，也可以不进行处理，
    增值应用模块再返回给ADD2，这样，用户终端上层程序一次可以得到通过
    ADD2以及增值应用数据缓存模块发送的经增值应用模块处理后的增值应
    用数据，提高了增值应用数据的传输速率。
    
				</td></tr><tr><td class="content" id="description_119">本实施例中，通过不同逻辑通道传送的数据包括：命令数据、待处理的
    增值应用数据、命令数据的响应、以及已处理的增值应用数据。
    
				</td></tr><tr><td class="content" id="description_120">实际应用中，ADD1和ADD2也可以为相互独立的同一逻辑通道，按照
    预设的策略独立进行增值数据的传输。
    
				</td></tr><tr><td class="content" id="description_121">对于本发明设置的每个逻辑通道对应扩展命令或非正常智能存储卡操
    作执行的流程，与设置的每个逻辑通道对应地址执行的流程相类似，在此不
    再赘述。实际上，本发明已经成功应用在智能存储卡系列产品的数字电视条
    件接收卡和安全存储卡中。
    
				</td></tr><tr><td class="content" id="description_122">以上举较佳实施例，对本发明的目的、技术方案和优点进行了进一步详
    细说明，所应理解的是，以上所述仅为本发明的较佳实施例而已，并不用以
    限制本发明，凡在本发明的精神和原则之内，所作的任何修改、等同替换、
    改进等，均应包含在本发明的保护范围之内。
    
				</td></tr></table></div></body></html>